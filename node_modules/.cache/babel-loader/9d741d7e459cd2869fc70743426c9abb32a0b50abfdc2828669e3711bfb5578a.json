{"ast":null,"code":"import _regeneratorRuntime from\"/Users/altafmalik/ReactJS/Obed Bhai/Tax_Engine_Test/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/altafmalik/ReactJS/Obed Bhai/Tax_Engine_Test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/altafmalik/ReactJS/Obed Bhai/Tax_Engine_Test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{observer}from\"mobx-react-lite\";import PublicLayout from\"./main-layout/public-layout\";import PrivateLayout from\"./main-layout/private-layout\";import{useEffect,useState}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import{constRoute}from\"@utils/route\";import{useStore}from\"@stores/root-store\";import{JWT_AUTH_ACCESS_TOKEN}from\"@utils/constants/important\";import{jsx as _jsx}from\"react/jsx-runtime\";var DefaultLayout=observer(function(){var navigate=useNavigate();var location=useLocation();var _useState=useState(localStorage.getItem(JWT_AUTH_ACCESS_TOKEN)),_useState2=_slicedToArray(_useState,2),isToken=_useState2[0],setIsToken=_useState2[1];var _useStore=useStore(null),_useStore$user=_useStore.user,loadUserInfo=_useStore$user.loadUserInfo,getCurrentUserData=_useStore$user.getCurrentUserData;useEffect(function(){var _localStorage$getItem;if(((_localStorage$getItem=localStorage.getItem(JWT_AUTH_ACCESS_TOKEN))===null||_localStorage$getItem===void 0?void 0:_localStorage$getItem.length)>0){setIsToken(localStorage.getItem(JWT_AUTH_ACCESS_TOKEN));}else{var _location$pathname;if(!((_location$pathname=location.pathname)!==null&&_location$pathname!==void 0&&_location$pathname.includes(constRoute.login))){localStorage.removeItem(JWT_AUTH_ACCESS_TOKEN);navigate(constRoute===null||constRoute===void 0?void 0:constRoute.home);setIsToken(\"\");}}},[localStorage.getItem(JWT_AUTH_ACCESS_TOKEN)]);useEffect(function(){navigate(constRoute===null||constRoute===void 0?void 0:constRoute.incomeTaxReturn);},[]);var handleLoadUserInfoDetal=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return loadUserInfo(navigate);case 2:case\"end\":return _context.stop();}},_callee);}));return function handleLoadUserInfoDetal(){return _ref.apply(this,arguments);};}();useEffect(function(){var _location$pathname2;if(!((_location$pathname2=location.pathname)!==null&&_location$pathname2!==void 0&&_location$pathname2.includes(constRoute.login))&&location.pathname!=='/')handleLoadUserInfoDetal();},[navigate]);return!isToken&&/*#__PURE__*/_jsx(PublicLayout,{})||/*#__PURE__*/_jsx(PrivateLayout,{});});export default DefaultLayout;","map":{"version":3,"names":["observer","PublicLayout","PrivateLayout","useEffect","useState","useNavigate","useLocation","constRoute","useStore","JWT_AUTH_ACCESS_TOKEN","jsx","_jsx","DefaultLayout","navigate","location","_useState","localStorage","getItem","_useState2","_slicedToArray","isToken","setIsToken","_useStore","_useStore$user","user","loadUserInfo","getCurrentUserData","_localStorage$getItem","length","_location$pathname","pathname","includes","login","removeItem","home","incomeTaxReturn","handleLoadUserInfoDetal","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","apply","arguments","_location$pathname2"],"sources":["/Users/altafmalik/ReactJS/Obed Bhai/Tax_Engine_Test/src/components/layout/index.tsx"],"sourcesContent":["import { observer } from \"mobx-react-lite\";\nimport PublicLayout from \"./main-layout/public-layout\";\nimport PrivateLayout from \"./main-layout/private-layout\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { constRoute } from \"@utils/route\";\nimport { useStore } from \"@stores/root-store\";\nimport { JWT_AUTH_ACCESS_TOKEN } from \"@utils/constants/important\";\nconst DefaultLayout = observer(() => {\n  const navigate = useNavigate()\n  const location = useLocation();\n const [isToken, setIsToken] = useState(localStorage.getItem(JWT_AUTH_ACCESS_TOKEN))\n const {\n  user: {loadUserInfo, getCurrentUserData },\n} = useStore(null);\n  useEffect(() => {\n    if (localStorage.getItem(JWT_AUTH_ACCESS_TOKEN)?.length > 0) {\n      setIsToken(localStorage.getItem(JWT_AUTH_ACCESS_TOKEN))\n    } else { \n      if(!location.pathname?.includes(constRoute.login)){\n        localStorage.removeItem(JWT_AUTH_ACCESS_TOKEN)\n        navigate(constRoute?.home)\n        setIsToken(\"\")\n      }\n    }\n  }, [localStorage.getItem(JWT_AUTH_ACCESS_TOKEN)])\n  \n  useEffect(() => {\n    navigate(constRoute?.incomeTaxReturn)\n  }, [])\n  \n  \n  const handleLoadUserInfoDetal=async()=>{\n    await loadUserInfo(navigate) \n   }\n useEffect(()=>{ \n  if(!location.pathname?.includes(constRoute.login)&& location.pathname!=='/') handleLoadUserInfoDetal()\n }, [navigate])\n  return !(isToken) && <PublicLayout /> || <PrivateLayout /> ;\n});\nexport default DefaultLayout;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}